"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[20496],{402833:(e,t,r)=>{r.d(t,{g:()=>o,t:()=>i});var n=r(667294);let a=(0,n.createContext)(null),i=a.Provider,o=()=>(0,n.useContext)(a)},550140:(e,t,r)=>{r.d(t,{UZ:()=>d,Vg:()=>l,ZP:()=>p});var n=r(667294),a=r(883119),i=r(549201),o=r(272109),s=r(785893);let l=200,d=({deviceType:e,hiding:t,visible:r})=>{let n="desktop"===e,a=0,i=n?"translateY(200px)":"translateY(-200px)",o="opacity 0.1s ease-in-out",s="hidden";return r&&!t&&(a=1,i="translateY(0)",o="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",s="visible"),r&&t&&(i="scale(1.1)",o="opacity transform 0.2s"),{opacity:a,pointerEvents:"auto",position:"relative",marginTop:n?10:0,transform:i,transition:o,visibility:s}};function p({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,text:r,primaryAction:p,dismissButton:c,helperLink:u,thumbnail:_,type:v,dataTestId:m,duration:y=2e3,onHide:g,href:D,onClick:I,openNewPage:f,imageUrl:h}){var T;let w;let P=(0,i.ZP)(),[b,E]=(0,n.useState)(!1),[x,S]=(0,n.useState)(!1),A=(0,n.useRef)(),R=()=>{E(!0),A.current=setTimeout(g,l)},C=()=>{A.current=setTimeout(R,y)},O=()=>{A.current&&clearTimeout(A.current)};(0,o.Z)(()=>(setTimeout(()=>S(!0),100),C(),O)),h&&(w={image:(0,s.jsx)(a.Ee,{alt:"string"==typeof r?r:`${r[0]} ${r[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:h})});let B=(0,s.jsx)(a.FN,{_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,primaryAction:p,text:r,thumbnail:null!==(T=w)&&void 0!==T?T:_,type:v,dismissButton:c,helperLink:u}),{marginTop:j,opacity:k,pointerEvents:L,position:Z,transform:M,transition:N,visibility:U}=d({deviceType:P,hiding:b,visible:x});return(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transform:M,transition:N,visibility:U,pointerEvents:L}},"data-test-id":null!=m?m:"toast",onMouseEnter:O,onMouseLeave:C,opacity:k,position:Z,marginTop:j,display:"flex",children:D?(0,s.jsx)(a.Tg,{href:D,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{D.startsWith("#")&&(e.preventDefault(),t()),null==I||I(e)},target:f?"blank":null,rounding:"pill",children:B}):B})}},870243:(e,t,r)=>{r.d(t,{qE:()=>s,u_:()=>l.ZP});var n=r(883119),a=r(785893);let i=(e,t)=>{let r=null==e?void 0:e.includes("images/user/default");return!!(r&&t)};function o({accessibilityLabel:e,name:t,outline:r,size:o,src:s,verified:l}){return(0,a.jsx)(n.qE,{accessibilityLabel:e,name:t,outline:r,size:o,src:i(s,t)?void 0:s,verified:l})}o.displayName="Avatar";let s=o;var l=r(88622);r(550140)},24286:(e,t,r)=>{r.d(t,{$H:()=>o,$q:()=>I,D6:()=>d,KN:()=>h,Lo:()=>a,OS:()=>_,P2:()=>y,Wv:()=>f,ZZ:()=>c,g5:()=>u,jC:()=>s,lX:()=>m,nW:()=>v,oX:()=>g,qG:()=>D,tG:()=>i,yF:()=>n,yc:()=>p,yt:()=>l});let n=236,a=2*n/3,i=175,o=24,s=4,l=8,d=2,p=2,c=14,u=16,_=5,v=12,m=16,y=24,g=16,D=-1,I=(e=!1,t=!1)=>e?t?m:v:y,f=({contentVisibleItemCount:e,gap:t,width:r})=>e||r?(r-(e-1)*t)/e:n,h=(e,t,r,n,a=c)=>{let i=e+a,o=`
@media (min-width: ${t*i}px) and (max-width: ${(r+1)*i-1}px) {
  ${n}
}
`;return o}},319689:(e,t,r)=>{r.d(t,{C:()=>i,V:()=>o});var n=r(667294);let a=(0,n.createContext)(!1),i=a.Provider,o=()=>(0,n.useContext)(a)},466946:(e,t,r)=>{r.d(t,{l:()=>i,r:()=>o});var n=r(667294);let a=(0,n.createContext)(null),i=()=>(0,n.useContext)(a),o=a.Provider},599226:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(402833),a=r(466946);let i=()=>{let e=(0,n.g)(),t=(0,a.l)();return r=>{let{mobileOptions:n,desktopOptions:a,reason:i,attributionLabel:o}=r;e?e.showDesktopSignupModal({signupFlow:(null==a?void 0:a.modalType)==="login"?{type:"login"}:{type:"signup"},reason:i,attributionLabel:o,...null==a?void 0:a.modalOptions}):t&&t.showMobileSignupModal({reason:i,attributionLabel:o,headingType:null==n?void 0:n.headingType})}}},328939:(e,t,r)=>{r.d(t,{fv:()=>D,fS:()=>P,Hs:()=>f,Mv:()=>y,uc:()=>g,dL:()=>m,qS:()=>I,Y4:()=>w,HE:()=>T,Cy:()=>h});var n=r(667294),a=r(973935),i=r(388011),o=r(906215),s=r(785893);function l(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends n.Component{constructor(...e){super(...e),l(this,"observe",()=>{try{if(this.node=(0,a.findDOMNode)(this),this.node instanceof HTMLElement){let{pinIdStr:e,newsIdStr:t}=this.props.eventData;o.Z.start(this.node).onExitViewport(this.logImpression).setDebugId(e||t||"unknown")}}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}}),l(this,"logImpression",e=>{this.props.logImpression({viewData:this.props.viewData||{},viewType:this.props.viewType,viewParameter:this.props.viewParameter,eventType:this.props.eventType,impressionType:this.props.impressionType,auxData:this.props.auxData,component:this.props.component,objectIdStr:this.props.objectIdStr,eventData:{endTime:e.endTime,time:e.startTime,...this.props.eventData}})})}componentDidMount(){this.props.isPaused||this.observe()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.observe()}componentWillUnmount(){this.node instanceof HTMLElement&&o.Z.stop(this.node)}render(){return n.Children.only(this.props.children)}}function p(e){let{logImpression:t}=(0,i.v)();return(0,s.jsx)(d,{...e,logImpression:t})}var c=r(521262),u=r(282802),_=r(567648);function v({auxData:e,component:t,eventData:r,eventType:a,impressionType:s,isPaused:l,objectIdStr:d,viewData:p,viewType:v,viewParameter:m}){let y=(0,n.useRef)(null),{logImpression:g}=(0,i.v)(),D=(0,_.Z)(),I=(0,u.B)(),f=(0,n.useCallback)(()=>{try{if(y.current instanceof HTMLElement){let{pinIdStr:n,newsIdStr:i}=r;o.Z.start(y.current).onExitViewport(n=>{var i,o,l,u,_,f;g({viewData:p||{},viewType:v,viewParameter:m,eventType:a,impressionType:s,auxData:e,component:t,objectIdStr:d,eventData:{endTime:n.endTime,time:n.startTime,pinCellWidth:(null===(i=y.current)||void 0===i?void 0:i.getBoundingClientRect().width)||0,pinCellHeight:(null===(o=y.current)||void 0===o?void 0:o.getBoundingClientRect().height)||0,windowWidth:null===(l=window)||void 0===l?void 0:l.innerWidth,windowHeight:null===(u=window)||void 0===u?void 0:u.innerHeight,...r}});let{attributionSourceId:h,campaignId:T,isPromoted:w,link:P,advertiserId:b}=r;"pinImpressions"===s&&w&&!D&&null!==(_=window.document.featurePolicy)&&void 0!==_&&_.allowsFeature("attribution-reporting")&&(0,c.YS)(s,w,null!=h?h:null,P,T,{appType:I.appTypeDetailed,osType:(0,c.eF)(null!==(f=I.userAgent.osName)&&void 0!==f?f:"Unknown")},null!=b?b:null)}).setDebugId(n||i||"unknown")}}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}},[y.current]);return(0,n.useEffect)(()=>{l||f();let{current:e}=y;return()=>{e instanceof HTMLElement&&o.Z.stop(e)}},[l,f]),y}let m=e=>{let t=v({eventData:{...e.impressionData||{},pinIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:18,impressionType:"pinImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},y=e=>{let t=v({eventData:{newsIdStr:e.notificationId,newsType:e.newsType,displayMode:e.displayMode,newsIndex:e.newsIndex||0,tapItemIdStr:e.tapItemIdStr},auxData:e.auxData||{},eventType:4111,impressionType:"notificationDetailImpressions",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:t})},g=e=>{let t=v({eventData:{newsIdStr:e.notificationId,newsType:e.newsType},auxData:e.auxData||{},eventType:4110,impressionType:"notificationFeedImpressions",loggingId:e.notificationId,viewType:107,viewParameter:3081});return e.children({impressionTrackerRef:t})},D=e=>(0,s.jsx)(p,{eventData:{...e.impressionData||{},articleIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:3829,impressionType:"articleImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter,children:e.children}),I=e=>{let t=v({eventData:{...e.impressionData||{},storyIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:170,impressionType:"storyImpression",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},f=e=>(0,s.jsx)(p,{eventData:{...e.impressionData||{},storyIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:170,impressionType:"storyImpression",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter,children:e.children}),h=e=>{let t=v({eventData:{...e.impressionData||{},userIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0},auxData:e.auxData||{},component:e.component,eventType:3704,impressionType:"userImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},T=e=>{let t=v({eventData:{...e.impressionData||{},topicIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0},auxData:e.auxData||{},component:e.component,eventType:3703,impressionType:"topicImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},w=e=>{let t=v({eventData:{...e.impressionData||{},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:8569,impressionType:"todayArticleImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},P=e=>{let t=v({eventData:{...e.impressionData||{},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:3700,impressionType:"boardImpressions",loggingId:e.loggingId,viewType:e.viewType||1,viewParameter:e.viewParameter,viewData:e.viewData});return e.children({impressionTrackerRef:t})}},230910:(e,t,r)=>{r.d(t,{AH:()=>d,CK:()=>l,Fc:()=>o,Wj:()=>i,Xe:()=>a,kb:()=>s,wS:()=>n});let n=(e,t,r,n)=>t||(e?e.official_user:r||n);function a({hasLinkDomain:e,hasNativeCreator:t,hasOriginPinner:r,pinDomain:n,sourceUserUsername:a,sourceUserFullName:i}){return!t&&(e||r)&&a?{pinCreditLink:`/${a}/`,pinCredit:i}:{pinCreditLink:void 0,pinCredit:!t&&e?n:""}}let i=({i18n:e,hasLinkDomain:t,hasRichMetadataArticle:r,hasRichMetadataRecipeCategorizedIngredients:n,hasRichMetadataTutorial:a,richMetadataRecipeFromAggregatedData:i})=>(!t||i)&&e.bt("Сохранено: ", "Saved by ", "Closeup pin annotation", undefined, true)||a&&e.bt("Источник: ", "Saved from ", "pin annotation", undefined, true)||n&&e.bt("Источник рецепта: ", "Recipe from ", "pin annotation", undefined, true)||r&&e.bt("Источник статьи: ", "Article from ", "pin annotation", undefined, true)||e.bt("Автор: ", "From ", "Closeup pin annotation", undefined, true);function o({i18n:e,hasRichMetadataProductOfferSummary:t,richMetadataProductName:r,richSummaryProductName:n,hasRichSummaryProductOfferSummary:a}){return t&&r||!t&&n&&a?e.bt("Продавец: ", "Product sold by ", "pin annotation", undefined, true):""}let s=({hasLinkDomain:e,richMetadata:t,richSummary:r})=>{var n;return e&&!(null!=t&&null!==(n=t.recipe)&&void 0!==n&&n.fromAggregatedData)&&null!=t&&t.products&&t.products[0]&&t.products[0].name&&t.products[0].offerSummary?t.products[0].offerSummary:null!=r&&r.products&&r.products[0]&&r.products[0].name&&r.products[0].offerSummary?r.products[0].offerSummary:void 0},l=({hasRichMetadata:e,hasRichMetadataProducts:t,hasRichMetadataArticle:r,hasRichMetadataRecipe:n})=>e?t?144:r?141:n?145:139:140,d=e=>!!e&&!e.startsWith("https://i.pinimg.com")},471819:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(536042),a=r(549201),i=r(393599),o=r(198060);let s=()=>{let e=(0,n.ZP)(),t=(0,a.HG)(),{viewer:r,loginForMore:s,limitedLoginModalSubheader:l,limitedLoginModalNextLocation:d}=(0,i.H)(),p="LIMITED_LOGIN"===r.type;return p?({modalHeader:r,nextLocation:n})=>a=>{let i=null;a&&(a.nativeEvent&&a.nativeEvent instanceof Event?i=a:a.event&&(i=a.event)),i&&(i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation()),null==s||s.setVisible(!0),null==l||l.setText(r||(t?(0,o.hr)(e):(0,o.Wh)(e))),n&&(null==d||d.setRoute(n))}:({fn:e})=>e}},952055:(e,t,r)=>{r.d(t,{Z:()=>n});function n(e,t,r){return{privacy_filter:t?"secret":"public",sort:r||"last_pinned_to",field_set_key:"profile_grid_item",username:e}}},248641:(e,t,r)=>{r.d(t,{O:()=>s,Q:()=>l});var n=r(756513),a=r(789144),i=r(541268);let o=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:r,username:n},a)=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:n,page_size:25,group_by:r?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0,...a?{orbac_subject_id:a}:Object.freeze({})})},l=e=>o.reduce((t,r)=>{let o=[(0,i.N8)("profileBoards",(0,a.Z)(e,r))];return[!0,!1].forEach(t=>{[!0,!1].forEach(a=>{o.push((0,n.jB)(s.name,s.options({username:e,boardOrder:r,mixPublicSecret:t,filterStories:a})))})}),t.concat(o)},[])},911767:(e,t,r)=>{r.d(t,{Br:()=>_,Cr:()=>E,K8:()=>I,L1:()=>k,Tq:()=>g,YQ:()=>j,YV:()=>b,ZP:()=>x,aX:()=>S,eo:()=>m,fJ:()=>Z,md:()=>v,oG:()=>y,oL:()=>A,of:()=>f,xH:()=>D,xQ:()=>h,xR:()=>B,xk:()=>w,yT:()=>u,zS:()=>L});var n=r(690108),a=r(40045),i=r(970588),o=r(575794),s=r(756513),l=r(952055),d=r(248641),p=r(541268),c=r(274796);function u(e){return{type:"BOARD_UPDATE_COMPLETE",payload:{board:e}}}function _(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}}function v(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function m({viewingUserId:e,viewingUsername:t,boardId:r,boardPinCount:n}){return{type:"BOARD_DELETE",payload:{viewingUserId:e,viewingUsername:t,boardId:r,boardPinCount:n}}}let y=(e,t)=>r=>r((0,o.U)("BoardResource",{options:{board_id:e,field_set_key:t}}));function g(e,t,r){return(0,o.U)("BoardResource",{options:{board_id:e,field_set_key:t,...r?{orbac_subject_id:r}:{}}})}function D(e,t,r){return n=>(0,i.Z)({url:`/v3/boards/${e}/merge/${t}/`,method:"POST",data:r?{orbac_subject_id:r}:{}}).then(()=>Promise.all([n(m({boardId:e})),n(g(t,"pin_count")),n((0,p.N8)(c.Z.BOARD_SECTIONS,t))]))}function I(e){return t=>{e&&(0,d.Q)(e).forEach(e=>{t(e)})}}let f=e=>({type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}),h=e=>y(e,"pin_count");function T(e,t){return{type:"BOARD_ARCHIVE",payload:{boardId:e,username:t}}}function w(e,t){return r=>(r(T(e)),n.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callUpdate())}function P(e){return{type:"BOARD_UNARCHIVE",payload:{boardId:e}}}function b(e,t){return r=>(r(P(e)),n.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callDelete())}let E=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),x=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}});function S(e,t,r){let i={name:e,privacy:a.Z.BoardPrivacy.PUBLIC,username:t,...r?{orbac_subject_id:r}:Object.freeze({})};return e=>n.Z.create("BoardResource",i).callCreate().then(r=>{let n=r.resource_response.data;return e(t&&(0,s.jB)("BoardsResource",(0,l.Z)(t,!1))),n})}function A(e={},t,r){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:r}}let R=(e,t)=>({type:"BOARD_INVITE_DENIED_BY_VIEWER",payload:{boardId:e,userId:t}}),C=(e,t,r)=>({type:"BOARD_COLLABORATOR_DELETE",payload:{boardId:e,userId:t,viewingUser:r}}),O=(e,t,r,n)=>({type:"BOARD_COLLABORATOR_ADD",payload:{boardId:e,viewingUser:t,status:r,collaboratingUsers:n}}),B=(e,t,r)=>async a=>{a(R(e,t));let i=await n.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callDelete();return i.resource_response.error||r({event_type:29,object_id_str:e}),i},j=(e,t,r,a,i,o)=>async s=>{var l,d;let p="accepted"===t?"BoardCollaboratorResource":"BoardInviteResource";s(C(e,null!==(l=null==a?void 0:a.id)&&void 0!==l?l:"",r));try{let r=await n.Z.create(p,{board_id:e,field_set_key:"boardEdit",invited_user_id:null!==(d=null==a?void 0:a.id)&&void 0!==d?d:"",...o?{orbac_subject_id:o}:{}}).callDelete();r.resource_response.error||i({event_type:"accepted"===t?25:29,object_id_str:e})}catch(n){s(O(e,r,t,[a]))}},k=(e,t,r,a)=>i=>{let o=n.Z.create("BoardResource",{board_id:r}).callDelete();return i(m({viewingUserId:e,viewingUsername:t,boardId:r,boardPinCount:a})),o},L=(e,t)=>r=>n.Z.create("BoardArchiveResource",{boardId:e}).callUpdate().then(n=>(r((0,p.Qv)("archived-boards",[{id:e,type:"board"}])),r(T(e,t)),n)),Z=(e,t)=>r=>n.Z.create("BoardArchiveResource",{boardId:e}).callDelete().then(n=>(r((0,p.Qv)(`profile-boards:${t}`,[{id:e,type:"board"}])),r(P(e)),n))},541268:(e,t,r)=>{function n(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function a(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}r.d(t,{EX:()=>o,N8:()=>a,Qv:()=>i,_f:()=>n,vX:()=>s});let i=(e,t,r=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:r,items:t}});function o(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function s(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},894788:(e,t,r)=>{r.d(t,{M:()=>l,i:()=>p});var n=r(782677),a=r(690108),i=r(756513),o=r(446191),s=r(255655);let l=(e,t,r,n)=>({type:"PIN_ADD",payload:{pinId:e,boardId:t,boardSectionId:r,pinnerId:n}}),d=(e,t)=>new Promise(r=>{e?(0,o.eR)(e).then(e=>{r(e)}):r(t)}),p=e=>t=>{let{method:r,guid:o,image_base64:p,image_url:c}=e;return d(p,c).then(d=>{let p={...e,method:"button"!==r||o?r:"button_external",image_url:d,image_base64:void 0},c="PinResource";return a.Z.create(c,p).callCreate().then(e=>{let r=(0,n.Fv)(e.resource_response.data,s.Z[c]);t((0,i.XM)(c,p,e,r));let a=e.resource_response.data,{board:{id:o},pinner:{id:d},section:u}=a,_=u&&u.id;return t(l(a.id,o,_,d)),e})})}},446191:(e,t,r)=>{r.d(t,{Ge:()=>d,JS:()=>o,OF:()=>f,P_:()=>s,Q_:()=>u,b8:()=>_,eR:()=>I,h2:()=>p,h6:()=>c});var n=r(690108),a=r(970588),i=r(336436);function o(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let s=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),l=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:r,blockContext:a,logContextEvent:i})=>async o=>{o(l(e,!0));let s=await n.Z.create("UserBlockResource",{blocked_user_id:e,orbac_subject_id:t,block_source:r,block_context:a}).callCreate().catch(()=>o(l(e,!1)));return i({event_type:54,object_id_str:e}),s},p=(e,t)=>async r=>{r(l(e,!1));let a=await n.Z.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch(()=>r(l(e,!0)));return t({event_type:55,object_id_str:e}),a};function c(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let u=(e,t)=>()=>{let r=n.Z.create("UserStateResource",{state:e,value:t});return r.callCreate()},_=(e,t,r)=>(n,o)=>{(0,a.Z)({url:"/v3/users/me/",method:"POST"}).then(()=>{r({event_type:48,object_id_str:o().session.userId}),e(),(0,i.Dm)()},t)},v=e=>e>=200&&e<400,m=(e,t="150x150")=>e&&`https://i.pinimg.com/${t}/${e.substring(0,2)}/${e.substring(2,4)}/${e.substring(4,6)}/${e}.jpg`||"",y=async(e,t,r)=>{let a=await n.Z.create("VIPResource",{upload_ids:[e]}).callGet();if(a.resource_response.data[e]){let n=a.resource_response.data[e],{status:i,signature:o}=n;if("processing"===i||"registered"===i)setTimeout(async()=>{y(e,t,r)},5e3);else if("succeeded"===i){let e=m(o);t(e)}else r()}else r()},g=(e,t,r,a,i)=>{let o=new FormData;return o.append("img",e),n.Z.create("VIPResource",{type:t}).callCreate().then(t=>{if(t.resource_response.data){let{upload_id:n,upload_url:o,upload_parameters:s}=t.resource_response.data,l=new XMLHttpRequest;l.open("POST",o,!0),l.onload=()=>{v(l.status)?(r(100),y(n,a,i)):i()},l.upload.onprogress=e=>{let t=Math.round(100*e.loaded/e.total);r(t)};let d=new FormData;for(let e in s)d.append(e,s[e]);d.append("file",e),l.send(d)}},()=>{i()})},D=e=>new Promise((t,r)=>{g(e,"pinimage",()=>{},e=>{t(e)},e=>{r(e)})}),I=e=>new Promise((t,r)=>{"string"==typeof e?e.startsWith("data")&&D(function(e,t=512){let r=e.split(";"),n=r[0].split(":")[1],a=r[1].split(",")[1],i=atob(a),o=[];for(let e=0;e<i.length;e+=t){let r=i.slice(e,e+t),n=Array(r.length);for(let e=0;e<r.length;e+=1)n[e]=r.charCodeAt(e);let a=new Uint8Array(n);o.push(a)}let s=new Blob(o,{type:n});return s}(e)).then(e=>t(e)):r("Invalid Image")}),f=e=>()=>(0,a.Z)({url:"/v3/register/exists/",data:{email:e}})},907310:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(883119),a=r(107877),i=r(785893);function o({boardId:e}){var t;let r=(0,a.gC)()(e),o=null!=r&&r.images&&r.images["170x"]?r.images["170x"][0]:void 0;return e&&o?(0,i.jsx)(n.Ee,{alt:"Pin image",color:"#efefef",fit:"cover",naturalHeight:1,naturalWidth:1,src:null!==(t=o.url)&&void 0!==t?t:""}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/20496.ru_RU-6f209e61653cafa4.mjs.map